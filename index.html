<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Read Twitter DM's Bookmarklet</title>
<style>
p {font-family:Tahoma, Geneva, sans-serif;}
a[href^=javascript],
pre { 
	background-color:#ededed; 
	border-radius: 10px; 
	padding: 10px;
}
a {text-decoration:none; text-shadow: 1px 1px 0 white;}
a.bm:hover {text-decoration: underline; background-color:#e0e0e0;}
</style>
</head>

<body>
<p>This bookmarklet will mark all of you Twitter direct messages as read simply by deleting the entry in local storage.</p>
<p>The Code: </p>
<pre>
//Get the URL
var urlistwitter=window.location.href.split('/')[2].split('.'); 

// Check to see if the domain is twitter
if(urlistwitter[urlistwitter.length-2]==='twitter') {

   // remove the local storage item of unread DM references
   localStorage.removeItem('__DM__:lastReadMessageId');
}

// remove the icon that makes them appear unread
document.querySelector('.profile.new').classList.remove('new');
</pre>
<p>Drag this link to your toolbar. When you need to, click it when your Twitter window has focus to remove the localStorage entry and that annoying blue 'unread' icon:</p>
<p><a class="bm" href="javascript:(function(){var urlistwitter=window.location.href.split('/')[2].split('.');if(urlistwitter[urlistwitter.length-2]==='twitter'){localStorage.removeItem('__DM__:lastReadMessageId');}document.querySelector('.profile.new').classList.remove('new');} )();">Mark DMs as Read</a></p>

<p style="margin-top: 100px;">Created by <a href="http://twitter.com/estellevw">@estellevw</a>. Pull request for improvements welcome.</p> 
</body>
</html>
